---
const links = [
  { label: 'About', href: '#about' },
  { label: 'Experience', href: '#experience' },
  { label: 'Projects', href: '#projects' },
  { label: 'Skills', href: '#skills' },
  { label: 'Contact', href: '#contact' },
];
---

<nav id="nav" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
  <div class="max-w-6xl mx-auto px-6 py-4 flex items-center justify-between">
    <a href="#" class="text-lg font-bold text-text-primary hover:text-accent transition-colors font-mono" data-hover>
      <span class="text-text-muted">{</span>BG<span class="text-text-muted">}</span>
    </a>

    <!-- Desktop -->
    <div class="hidden md:flex items-center gap-8">
      {links.map((link, i) => (
        <a
          href={link.href}
          class="text-sm text-text-secondary hover:text-accent transition-colors font-mono"
          data-hover
        >
          <span class="text-accent/50 text-xs mr-1">0{i + 1}.</span>{link.label}
        </a>
      ))}
    </div>

    <!-- Mobile toggle -->
    <button
      id="menu-toggle"
      class="md:hidden flex flex-col gap-1.5 w-6"
      aria-label="Toggle menu"
      data-hover
    >
      <span class="block w-full h-0.5 bg-text-secondary transition-all origin-center" id="bar1"></span>
      <span class="block w-full h-0.5 bg-text-secondary transition-all" id="bar2"></span>
      <span class="block w-2/3 h-0.5 bg-text-secondary transition-all origin-center ml-auto" id="bar3"></span>
    </button>
  </div>

  <!-- Mobile menu -->
  <div id="mobile-menu" class="hidden md:hidden bg-bg-card/95 backdrop-blur-xl border-t border-border">
    <div class="px-6 py-6 flex flex-col gap-5">
      {links.map((link, i) => (
        <a
          href={link.href}
          class="text-text-secondary hover:text-accent transition-colors font-mono mobile-link"
        >
          <span class="text-accent/50 text-sm mr-2">0{i + 1}.</span>{link.label}
        </a>
      ))}
    </div>
  </div>
</nav>

<script>
  const nav = document.getElementById('nav')!;
  const toggle = document.getElementById('menu-toggle')!;
  const menu = document.getElementById('mobile-menu')!;
  const bar1 = document.getElementById('bar1')!;
  const bar2 = document.getElementById('bar2')!;
  const bar3 = document.getElementById('bar3')!;
  let isOpen = false;

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      nav.classList.add('bg-bg/80', 'backdrop-blur-xl', 'border-b', 'border-border');
    } else {
      nav.classList.remove('bg-bg/80', 'backdrop-blur-xl', 'border-b', 'border-border');
    }
  });

  toggle.addEventListener('click', () => {
    isOpen = !isOpen;
    menu.classList.toggle('hidden');
    if (isOpen) {
      bar1.style.transform = 'rotate(45deg) translate(3px, 3px)';
      bar2.style.opacity = '0';
      bar3.style.transform = 'rotate(-45deg) translate(2px, -2px)';
      bar3.style.width = '100%';
    } else {
      bar1.style.transform = '';
      bar2.style.opacity = '1';
      bar3.style.transform = '';
      bar3.style.width = '66%';
    }
  });

  document.querySelectorAll('.mobile-link').forEach((link) => {
    link.addEventListener('click', () => {
      menu.classList.add('hidden');
      isOpen = false;
      bar1.style.transform = '';
      bar2.style.opacity = '1';
      bar3.style.transform = '';
      bar3.style.width = '66%';
    });
  });
</script>
